---
# handlers file for user

- name: "Force password change" # noqa no-changed-when
  loop: "{{ useradd.results }}"
  when: item.changed
  ansible.builtin.command:
    cmd: "passwd -e {{ item.name }}"

- name: "Restart user services"
  loop: "{{ limit_state.results }}"
  when: item.changed
  ansible.builtin.systemd_service:
    name: user@{{ item.item.uid }}
    state: restarted
    daemon_reload: true
